{{- partial "analytics" . -}}
<meta charset="utf-8">

{{- $tagline := "Multifamily EV Charging" -}}
<title>
  {{- if .IsHome -}}
    {{ .Site.Title }} | {{ $tagline }}
  {{- else -}}
    {{ .Site.Title }}{{ with .Title }} | {{ . }}{{ end }}
  {{- end -}}
</title>

<meta name="viewport" content="width=device-width,initial-scale=1.0">

<link rel="apple-touch-icon" sizes="180x180" href='{{ "apple-touch-icon.png" | relURL }}'>
<link rel="icon" type="image/png" sizes="32x32" href='{{ "favicon-32x32.png" | relURL }}'>
<link rel="icon" type="image/png" sizes="16x16" href='{{ "favicon-16x16.png" | relURL }}'>
<link rel="manifest" href='{{ "site.webmanifest" | relURL }}'>

<!-- Preconnects: Cloudinary images + Google Fonts -->
<link rel="preconnect" href="https://res.cloudinary.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

{{/* OPTIONAL: Font Awesome + Material Symbols (non-blocking load) */}}
{{ if .Site.Params.icon.fontawesome }}
  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"></noscript>

  <!-- Google Material Symbols Outlined (add display=swap to avoid FOIT) -->
  {{/* note: this CSS file is tiny; still load non-blocking for consistency */}}
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined&display=swap" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined&display=swap" rel="stylesheet"></noscript>

  <style>
    .material-symbols-outlined{
      font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 0,'opsz' 24;
      font-size:1.5rem;vertical-align:middle;
    }
  </style>
{{ end }}

{{/* ---- MAIN SITE CSS (Hugo Pipes) ----
     For dev: normal <link>.
     For prod: preload â†’ swap to avoid render-blocking.
*/}}
{{ $styles := resources.Get "css/style.css" | postCSS }}
{{ if hugo.IsServer }}
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}">
{{ else }}
  {{ $styles = $styles | minify | fingerprint | resources.PostProcess }}
  <link rel="preload" as="style" href="{{ $styles.RelPermalink }}" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="{{ $styles.RelPermalink }}"></noscript>
{{ end }}

{{/* ---- EXTRA LOCAL CSS (load non-blocking) ----
     If these are required, keep them; otherwise consider merging into style.css.
*/}}
{{ if .IsHome }}
  <link rel="preload" as="style" href='{{ "/css/swiper-bundle.min.css" | relURL }}' onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href='{{ "/css/swiper-bundle.min.css" | relURL }}'></noscript>
{{ end }}

<link rel="preload" as="style" href='{{ "/css/style.min.css" | relURL }}' onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href='{{ "/css/style.min.css" | relURL }}'></noscript>

<link rel="preload" as="style" href='{{ "/css/custom.css" | relURL }}' onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href='{{ "/css/custom.css" | relURL }}'></noscript>
